/* ========== app/globals.css (Tailwind CSS 4.0 + Dark Mode) ========== */
@import "tailwindcss";

/* 🌓 Dark Mode 配置 - 使用 class 方式 */
@custom-variant dark (&:where(.dark, .dark *));

/* ==================== 主題配置 ==================== */
@theme {
  /* 自定義顏色 */
  --color-brand-primary: var(--color-primary, #f59e0b);
  --color-brand-secondary: var(--color-secondary, #f97316);
  --color-brand-accent: var(--color-accent, #fb923c);

  /* 品牌色系 */
  --color-brand-50: #fffbeb;
  --color-brand-100: #fef3c7;
  --color-brand-200: #fde68a;
  --color-brand-300: #fcd34d;
  --color-brand-400: #fbbf24;
  --color-brand-500: #f59e0b;
  --color-brand-600: #d97706;
  --color-brand-700: #b45309;
  --color-brand-800: #92400e;
  --color-brand-900: #78350f;

  /* 字體家族 */
  --font-sans: var(--font-noto-sans-tc), var(--font-inter), system-ui, sans-serif;

  /* 自定義間距 */
  --spacing-18: 4.5rem;
  --spacing-22: 5.5rem;

  /* 自定義邊框圓角 */
  --radius-4xl: 2rem;
  --radius-5xl: 3rem;

  /* 自定義陰影 */
  --shadow-glow: 0 0 20px rgba(245, 158, 11, 0.3);
  --shadow-glow-lg: 0 0 40px rgba(245, 158, 11, 0.4);

  /* 動畫時間 */
  --duration-fast: 150ms;
  --duration-normal: 300ms;
  --duration-slow: 500ms;
}

/* ==================== CSS 變數（動態主題） ==================== */
:root {
  /* 主題顏色 - 由 ThemeContext 動態設置 */
  --color-primary: #f59e0b;
  --color-secondary: #f97316;
  --color-accent: #fb923c;
  --gradient-from: #f59e0b;
  --gradient-to: #f97316;

  /* 佈局變數 */
  --header-height: 80px;
  --container-padding: 1rem;
}

/* ==================== 基礎樣式 ==================== */
@layer base {
  * {
    @apply border-gray-200;
  }

  .dark * {
    @apply border-gray-700;
  }

  html {
    @apply scroll-smooth;
    color-scheme: light;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    @apply antialiased transition-colors duration-300;
    @apply bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50;
    @apply text-gray-900;
  }

  .dark body {
    @apply bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950;
    @apply text-gray-100;
  }

  /* 標題樣式 */
  h1 {
    @apply text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight;
    @apply text-gray-900;
  }

  .dark h1 {
    @apply text-white;
  }

  h2 {
    @apply text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight;
    @apply text-gray-900;
  }

  .dark h2 {
    @apply text-white;
  }

  h3 {
    @apply text-2xl md:text-3xl lg:text-4xl font-bold tracking-tight;
    @apply text-gray-900;
  }

  .dark h3 {
    @apply text-white;
  }

  h4 {
    @apply text-xl md:text-2xl font-bold;
    @apply text-gray-900;
  }

  .dark h4 {
    @apply text-white;
  }

  /* 無障礙 focus 樣式 */
  *:focus-visible {
    @apply outline-2 outline-offset-2;
    outline-color: var(--color-primary);
  }

  *:focus:not(:focus-visible) {
    @apply outline-none;
  }
}

/* ==================== 組件樣式 ==================== */
@layer components {

  /* 按鈕樣式 */
  .btn {
    @apply px-6 py-3 rounded-lg font-semibold;
    @apply transition-all duration-300;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2;
  }

  .btn-primary {
    @apply text-white shadow-md hover:shadow-lg;
    background: linear-gradient(to right, var(--gradient-from), var(--gradient-to));
  }

  .btn-primary:hover {
    @apply scale-105;
    filter: brightness(1.1);
  }

  .btn-secondary {
    @apply border-2;
    @apply bg-white text-gray-700;
    border-color: var(--color-primary);
  }

  .dark .btn-secondary {
    @apply bg-gray-800 text-gray-300;
  }

  .btn-secondary:hover {
    background-color: color-mix(in srgb, var(--color-primary) 10%, transparent);
  }

  .btn-ghost {
    @apply bg-transparent text-gray-700;
    @apply hover:bg-gray-100;
  }

  .dark .btn-ghost {
    @apply text-gray-300;
    @apply hover:bg-gray-800;
  }

  /* 卡片樣式 */
  .card {
    @apply bg-white;
    @apply rounded-2xl shadow-lg;
    @apply border border-gray-100;
    @apply transition-all duration-300;
  }

  .dark .card {
    @apply bg-gray-800;
    @apply border-gray-700;
  }

  .card:hover {
    @apply shadow-xl -translate-y-1;
  }

  /* 玻璃態效果 */
  .glass {
    @apply backdrop-blur-lg shadow-xl;
    @apply bg-white/80;
    @apply border border-white/20;
  }

  .dark .glass {
    @apply bg-gray-900/80;
    @apply border-gray-700/20;
  }

  /* 輸入框樣式 */
  .input {
    @apply w-full px-4 py-3 rounded-lg;
    @apply border border-gray-300;
    @apply bg-white;
    @apply text-gray-900;
    @apply placeholder:text-gray-400;
    @apply transition-all duration-200;
  }

  .dark .input {
    @apply border-gray-600;
    @apply bg-gray-800;
    @apply text-gray-100;
    @apply placeholder:text-gray-500;
  }

  .input:focus {
    @apply ring-2 ring-offset-2;
    border-color: var(--color-primary);
    ring-color: color-mix(in srgb, var(--color-primary) 30%, transparent);
  }

  .dark .input:focus {
    @apply ring-offset-gray-900;
  }

  /* 徽章樣式 */
  .badge {
    @apply inline-flex items-center px-3 py-1;
    @apply text-sm font-medium rounded-full;
  }

  .badge-primary {
    background-color: color-mix(in srgb, var(--color-primary) 20%, transparent);
    color: var(--color-primary);
  }

  .badge-success {
    @apply bg-green-100 text-green-800;
  }

  .dark .badge-success {
    @apply bg-green-900/30 text-green-400;
  }

  .badge-warning {
    @apply bg-orange-100 text-orange-800;
  }

  .dark .badge-warning {
    @apply bg-orange-900/30 text-orange-400;
  }

  .badge-danger {
    @apply bg-red-100 text-red-800;
  }

  .dark .badge-danger {
    @apply bg-red-900/30 text-red-400;
  }

  /* 漸層背景 */
  .gradient-bg {
    background: linear-gradient(to right, var(--gradient-from), var(--gradient-to));
  }

  /* 漸層文字 */
  .gradient-text {
    background: linear-gradient(to right, var(--gradient-from), var(--gradient-to));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* 狀態指示器 */
  .status-indicator {
    @apply w-3 h-3 rounded-full relative;
  }

  .status-indicator::before {
    content: '';
    @apply absolute inset-0 rounded-full animate-ping opacity-75;
  }

  .status-online {
    @apply bg-green-500;
  }

  .status-online::before {
    @apply bg-green-500;
  }

  .status-offline {
    @apply bg-red-500;
  }

  .status-offline::before {
    @apply bg-red-500;
  }

  /* 載入動畫 */
  .loading-spinner {
    @apply inline-block w-6 h-6;
    @apply border-4 rounded-full animate-spin;
    @apply border-gray-200;
    border-top-color: var(--color-primary);
  }

  .dark .loading-spinner {
    @apply border-gray-700;
  }
}

/* ==================== 工具類 ==================== */
@layer utilities {

  /* 文字截斷 */
  .text-truncate {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  /* 多行文字截斷 */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* 隱藏滾動條 */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* 自定義滾動條 */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-800;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply rounded-full;
    background-color: var(--color-primary);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    filter: brightness(1.1);
  }

  /* 動畫延遲 */
  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  .animation-delay-600 {
    animation-delay: 600ms;
  }
}

/* ==================== 自定義動畫 ==================== */
@keyframes float {

  0%,
  100% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-20px);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(100%);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translateX(-100%);
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* 動畫類別 */
.animate-float {
  animation: float 3s ease-in-out infinite;
}

.animate-fade-in {
  animation: fadeIn 0.5s ease-out;
}

.animate-fade-in-up {
  animation: fadeInUp 0.6s ease-out;
}

.animate-slide-in-right {
  animation: slideInRight 0.5s ease-out;
}

.animate-slide-in-left {
  animation: slideInLeft 0.5s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.3s ease-out;
}

/* ==================== 響應式調整 ==================== */
@media (max-width: 640px) {
  :root {
    --container-padding: 0.75rem;
  }
}

/* ==================== Print 樣式 ==================== */
@media print {
  body {
    @apply bg-white;
  }

  .no-print {
    display: none !important;
  }
}